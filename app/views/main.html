<!-- this is where the chart actually renders -->
<div class="col-sm-5 rendering">
  <div id="chart" build-chart ng-style="{'background-color': config.chartBackground}"></div> <!-- everything gets rendered inside of this -->
  <canvas id="canvas" width="1072px" height="676px" /> <!-- needed for PNG output -->
</div>

<!-- chart controls -->
<div class="col-sm-7" id="chartControls">
  <h1><small>axisJS v0.2.0</small></h1>

  <!-- data input/display -->
  <div class="row">
    <div class="col-xs-12">
      <div class="panel panel-default">
        <div class="panel-heading">Data Input</div>
        <div class="panel-body">
          <textarea id="csvInput" class="form-control" rows="3" ng-model="inputs.csvData" ui-validate="'validateCSV($value)'" ng-change="updateData()"></textarea>
          <div class="alert alert-danger" ng-show="!inputs.csvData"><strong>Whoops!</strong> Seems like you've entered some malformed CSV data...</div>
          <!-- <div id="dataGrid" ng-if="chartData" ng-grid="gridOptions"></div> --> <!-- TODO make this work -->
        </div>
      </div>
    </div>
  </div> <!-- /.row -->

  <div class="row">
    <div class="col-xs-6">

      <!-- data options -->
      <div class="panel panel-default">
        <div class="panel-heading">Data options</div>
        <div class="panel-body">
          <select ng-model="config.chartGlobalType" class="form-control" id="chartGlobalType" ng-change="setGlobalType(config.chartGlobalType)">
            <option value="series">series</option>
            <option value="pie">pie</option>
            <option value="donut">donut</option>
            <option value="gauge" ng-disabled="config.data.columns.length > 1">gauge</option>
          </select>
          <div class="form-group" ng-repeat="col in columns">
            <label for="type-{{col}}">{{col}}</label>
            <div class="input-group">
              <span class="input-group-addon">
                <select ui-jq="colorselector" ng-model="config.data.colors[col]">
                    <option value="#78B8DF" data-color="#78B8DF">neutral 1</option>
                    <option value="#AFCBCE" data-color="#AFCBCE">neutral 2</option>
                    <option value="#23393D" data-color="#23393D">neutral 3</option>
                    <option value="#87AF9C" data-color="#87AF9C">neutral 4</option>
                    <option value="#0EBF00" data-color="#0EBF00">yes</option>
                    <option value="#ED1B24" data-color="#ED1B24">no</option>
                    <option value="#808080" data-color="#808080">maybe</option>
                    <option value="#ED1B24" data-color="#ED1B24">Labour</option>
                    <option value="#022397" data-color="#022397">Conservative</option>
                    <option value="#FDBB30" data-color="#FDBB30">LibDem</option>
                    <!-- TODO figure out why I can't use ng-repeat on scope.config.defaultColors with these... -->
                    <option value="#1f77b4" data-color="#1f77b4">#1f77b4</option>
                    <option value="#aec7e8" data-color="#aec7e8">#aec7e8</option>
                    <option value="#ff7f0e" data-color="#ff7f0e">#ff7f0e</option>
                    <option value="#ffbb78" data-color="#ffbb78">#ffbb78</option>
                    <option value="#2ca02c" data-color="#2ca02c">#2ca02c</option>
                    <option value="#98df8a" data-color="#98df8a">#98df8a</option>
                    <option value="#d62728" data-color="#d62728">#d62728</option>
                    <option value="#ff9896" data-color="#ff9896">#ff9896</option>
                    <option value="#9467bd" data-color="#9467bd">#9467bd</option>
                    <option value="#c5b0d5" data-color="#c5b0d5">#c5b0d5</option>
                    <option value="#8c564b" data-color="#8c564b">#8c564b</option>
                    <option value="#c49c94" data-color="#c49c94">#c49c94</option>
                    <option value="#e377c2" data-color="#e377c2">#e377c2</option>
                    <option value="#f7b6d2" data-color="#f7b6d2">#f7b6d2</option>
                    <option value="#7f7f7f" data-color="#7f7f7f">#7f7f7f</option>
                    <option value="#c7c7c7" data-color="#c7c7c7">#c7c7c7</option>
                    <option value="#bcbd22" data-color="#bcbd22">#bcbd22</option>
                    <option value="#dbdb8d" data-color="#dbdb8d">#dbdb8d</option>
                    <option value="#17becf" data-color="#17becf">#17becf</option>
                    <option value="#9edae5" data-color="#9edae5">#9edae5</option>
                </select>
              </span>
              <select class="form-control" id="type-{{col}}" ng-model="config.data.types[col]" ng-disabled="config.chartGlobalType !== 'series'">
                <option value="{{chart}}" ng-repeat="chart in chartTypes">{{chart}}</option>
              </select>
              <span class="input-group-addon" ng-show="config.data.types[col] === 'bar'">
                <select id="group-{{col}}" ng-model="config.groups[col]" ng-change="setGroups()" title="group">
                  <option value="{{group}}" ng-repeat="group in [0,1,2]">{{group + 1}}</option>
                </select>
              </span>
            </div>
          </div>
        </div>
      </div> <!-- /.panel -->

      <!-- chart options -->
      <div class="panel panel-default">
        <div class="panel-heading">Chart options</div>
        <div class="panel-body">
          <form class="form-horizontal" role="form">
            <div class="form-group">
              <label for="legendPosition" class="col-sm-2 control-label">Legend</label>
              <div class="col-sm-10">
                <div class="input-group">
                  <select class="form-control" id="legendPosition" ng-model="config.legend.position">
                    <option value="bottom">bottom</option>
                    <!-- <option value="top">top</option>
                    <option value="left">left</option> -->
                    <option value="right">right</option>
                  </select>
                  <span class="input-group-addon">
                    <input type="checkbox" ng-model="config.legend.show" />
                  </span>
                </div>
              </div>
            </div>
            <div class="form-group">
              <label for="chartTitle" class="col-sm-2 control-label">Title</label>
              <div class="col-sm-10">
                <input type="text" class="form-control" id="chartTitle" ng-model="config.chartTitle" placeholder="">
              </div>
            </div>
            <div class="form-group">
              <label for="chartTitle" class="col-sm-2 control-label">Credit</label>
              <div class="col-sm-10">
                <input type="text" class="form-control" id="chartCredit" ng-model="config.chartCredit" placeholder="Your Name/The Times" ng-model="chartCredit">
              </div>
            </div>
            <div class="form-group">
              <label for="chartTitle" class="col-sm-2 control-label">Source</label>
              <div class="col-sm-10">
                <input type="text" class="form-control" id="chartSource" ng-model="config.chartSource" placeholder="YouGov" ng-model="chartSource">
              </div>
            </div>
            <div class="form-group">
              <label for="chartWidth" class="col-sm-2 control-label">Width (in px)</label>
              <div class="col-sm-10">
                <input type="number" class="form-control" id="chartWidth" ng-model="config.chartWidth">
              </div>
            </div>
            <div class="form-group" ng-if="config.chartGlobalType !== 'series'">
              <label class="col-sm-3 control-label" for="chartAccuracy">Accuracy</label>
              <div class="col-sm-9">
                <select id="chartAccuracy" class="form-control" ng-model="config.chartAccuracy">
                  <option value="0">No decimal places</option>
                  <option value="1">1 decimal places</option>
                  <option value="2">2 decimal places</option>
                  <option value="3">3 decimal places</option>
                </select>
              </div>
            </div>
          </form>
        </div> <!-- /.panel-body -->
      </div> <!-- /.panel -->

      <!-- output options -->
      <div class="panel panel-default">
        <div class="panel-heading">Output</div>
        <div class="panel-body" style="text-align: center;">
          <button class="btn btn-success saveCMS" export-chart="cms" ng-if="!!config.cms">Copy to CMS</button>
          <div class="btn-group">
            <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" export-chart="images">
              Save... <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
              <li><a class="savePNG" href="#">Save as PNG (for email)</a></li>
              <li><a class="saveSVG" href="#">Save as SVG (for print)</a></li>
            </ul>
          </div>
        </div> <!-- /.panel-body -->
      </div> <!-- /.panel -->
    </div> <!-- /.col-xs-6 -->

    <!-- axis options -->
    <div class="col-xs-6">
      <div class="panel panel-default">
        <div class="panel-heading">Axes</div>
        <div class="panel-body">
          <form class="form-horizontal" role="form">
            <fieldset ng-disabled="config.chartGlobalType !== 'series'">

              <!-- y axis -->
              <h4>Left Axis <input type="checkbox" ng-model="config.axis.y.show" /></h4>
              <fieldset ng-hide="!config.axis.y.show">
                <div class="form-group">
                  <label class="col-sm-3 control-label" for="yAxisColumn">Column</label>
                  <div class="col-sm-9">
                    <select class="form-control" id="xAxisColumn" ng-model="config.data.y">
                      <option value=""></option>
                      <option value="{{col}}" ng-repeat="col in columns">{{col}}</option>
                    </select>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 control-label" for="yAxisLabel">Label</label>
                  <div class="col-sm-9">
                    <input type="text" id="yAxisLabel" class="form-control" ng-model="config.axis.y.label" />
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 control-label" for="yAxisPrefix">Prefix</label>
                  <div class="col-sm-9">
                    <input type="text" id="yAxisPrefix" class="form-control" ng-model="config.axis.y.prefix"/>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 control-label" for="yAxisSuffix">Suffix</label>
                  <div class="col-sm-9">
                    <input type="text" id="yAxisSuffix" class="form-control" ng-model="config.axis.y.suffix" />
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 control-label" for="yAxisMin">Min.</label>
                  <div class="col-sm-9">
                    <input type="number" id="yAxisMin" class="form-control" ng-model="config.axis.y.min" />
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 control-label" for="yAxisMax">Max.</label>
                  <div class="col-sm-9">
                    <input type="number" id="yAxisMax" class="form-control" ng-model="config.axis.y.max" />
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 control-label" for="yAxisAccuracy">Accuracy</label>
                  <div class="col-sm-9">
                    <select id="yAxisAccuracy" class="form-control" ng-model="config.axis.y.accuracy" ng-disabled="config.data.y">
                      <option value="0">No decimal places</option>
                      <option value="1">1 decimal places</option>
                      <option value="2">2 decimal places</option>
                      <option value="3">3 decimal places</option>
                    </select>
                  </div>
                </div>
              </fieldset>

              <!-- x axis -->
              <h4>Bottom Axis <input type="checkbox" ng-model="config.axis.x.show" /></h4>
              <fieldset ng-hide="!config.axis.x.show">
                <div class="form-group">
                  <label class="col-sm-3 control-label" for="xAxisColumn">Column</label>
                  <div class="col-sm-9">
                    <select class="form-control" id="xAxisColumn" ng-model="config.data.x">
                      <option value=""></option>
                      <option value="{{col}}" ng-repeat="col in columns">{{col}}</option>
                    </select>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 control-label" for="xAxisLabel">Label</label>
                  <div class="col-sm-9">
                    <input type="text" id="xAxisLabel" class="form-control" ng-model="config.axis.x.label" />
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 control-label" for="xAxisPrefix">Prefix</label>
                  <div class="col-sm-9">
                    <input type="text" id="xAxisPrefix" class="form-control" ng-model="config.axis.x.prefix" />
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 control-label" for="xAxisSuffix">Suffix</label>
                  <div class="col-sm-9">
                    <input type="text" id="xAxisSuffix" class="form-control" ng-model="config.axis.x.suffix" />
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 control-label" for="xAxisMin">Minimum</label>
                  <div class="col-sm-9">
                    <input type="number" id="xAxisMin" class="form-control" ng-model="config.axis.x.min"/>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 control-label" for="xAxisMax">Maximum</label>
                  <div class="col-sm-9">
                    <input type="number" id="xAxisMax" class="form-control" ng-model="config.axis.x.max" />
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 control-label" for="xAxisAccuracy">Accuracy</label>
                  <div class="col-sm-9">
                    <select id="xAxisAccuracy" class="form-control" ng-model="config.axis.x.accuracy" ng-disabled="config.data.x">
                      <option value="0">No decimal places</option>
                      <option value="1">1 decimal places</option>
                      <option value="2">2 decimal places</option>
                      <option value="3">3 decimal places</option>
                    </select>
                  </div>
                </div>
              </fieldset>

              <!-- y2 axis -->
              <h4>Right Axis <input type="checkbox" ng-model="config.axis.y2.show" /></h4>
              <fieldset ng-hide="!config.axis.y2.show">
                <div class="form-group">
                  <label class="col-sm-3 control-label" for="y2AxisColumn">Column</label>
                  <div class="col-sm-9">
                    <select class="form-control" id="y2AxisColumn" ng-model="config.data.y2">
                      <option value=""></option>
                      <option value="{{col}}" ng-repeat="col in columns">{{col}}</option>
                    </select>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 control-label" for="y2AxisLabel">Label</label>
                  <div class="col-sm-9">
                    <input type="text" id="y2AxisLabel" class="form-control" ng-model="config.axis.y2.label" />
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 control-label" for="y2AxisPrefix">Prefix</label>
                  <div class="col-sm-9">
                    <input type="text" id="y2AxisPrefix" class="form-control" ng-model="config.axis.y2.prefix" />
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 control-label" for="y2AxisSuffix">Suffix</label>
                  <div class="col-sm-9">
                    <input type="text" id="y2AxisSuffix" class="form-control" ng-model="config.axis.y2.suffix" />
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 control-label" for="y2AxisMin">Min.</label>
                  <div class="col-sm-9">
                    <input type="number" id="y2AxisMin" class="form-control" ng-model="config.axis.y2.min" />
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 control-label" for="y2AxisMax">Max.</label>
                  <div class="col-sm-9">
                    <input type="number" id="y2AxisMax" class="form-control" ng-model="config.axis.y2.max" />
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 control-label" for="y2AxisAccuracy">Accuracy</label>
                  <div class="col-sm-9">
                    <select id="y2AxisAccuracy" class="form-control" ng-model="config.axis.y2.accuracy" ng-disabled="config.data.y2">
                      <option value="0">No decimal places</option>
                      <option value="1">1 decimal places</option>
                      <option value="2">2 decimal places</option>
                      <option value="3">3 decimal places</option>
                    </select>
                  </div>
                </div>
              </fieldset>
            </fieldset>
          </form>
        </div> <!-- /.panel-body -->
      </div> <!-- /.panel -->
    </div> <!-- /.col-xs-6 -->
  </div> <!-- /.row -->
</div> <!-- /#chart-controls -->
